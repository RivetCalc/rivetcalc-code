#! python 
#%%
from rivet.rivet_lib import *
r__("""r    file settings
    rset = {"title": "my calc",  
            "files": {"eqfile": "file", 
                    "valfile": "file",
                    "cssfile": "file", 
                    "styfile": "file"
                    },
            "pdf"  : [ "pagesize", ["margins"]],
            "opt"  : ["nodate, noclean, notoc, narrow", 80],
            "tags" : {"material": "concrete", 
                    "component": "beam",
                    "code": "ACI318-05",
                    "comment": "dynamic loading"
                    },
                }
    """)
#%%
r__("""i    {01} Load Sums 
    
    The need to distinguish between the various meanings of "frame of
    reference" has led to a variety of terms. For example, sometimes the type
    of coordinate system is attached as a modifier, as in Cartesian frame of
    reference.

        α = 3^2 * (2 + 5) / 7 

    Sometimes the state of motion asfda asd s fdas sfdfasdfasdf is
    emphasized, as in rotating frame of reference.  

                        2
                    d w
            M = -EI ─── 
                        2
                    dx 

    Insert figures
    | file1.png | caption | right [size]
    
    | file2.jpg | caption | left [size]

    Insert text
    | ttext1.txt | label

    Render equation from database
    | rivet_eq.csv | label, area_trapezoid, latex
    
    Render embedded equation
    | \\frac{1 + \omega}{2 + \gamma}  

    Some added text is put here and a bit of nonsense but I need some more words
    to make a paragraph.

    Table from csv
    | rebars.csv | Rebar table [40]

    Insert horizontal line
    | line [thickness]

    Table from rst
    | rebars.rst | Rebar table 

    """)        
r__("""v    some values 
    
    Some text if needed

    a11 = 12.23  | description 1 
    a22 = 2.2    | description 2 
    a33 = 14     | description 3

    | aisc13.csv | LABEL, WT7X60, A, A1  | units [2]

    """)
r__("""e    equations label 
    
    Some introductory text.

    equation description1 | units [2,2,0] | <1
    aa2 = a11*14

    equation description2 | units [2,2,0] | <1
    aa22 = aa2*5


    """)
#%%
r__("""i    {02} Seismic Analysis
    
    This is a test γ = 2*Σ of the system and this is a further test
    and another greek letter Γ₂.

    The need to distinguish between the various meanings of "frame of
    reference" has led to a variety of terms. For example, sometimes the type
    of coordinate

    |newpage

    The way it transforms to frames considered as related is emphasized as in
    Galilean frame of reference. Sometimes frames are distinguished by the
    scale of their observations, as in macroscopic and microscopic frames of
    reference.[1]
    
    """)

r__("""e    some equations
    
    equation description3 | units  [2,2,0]

    xx1 = gg + 4
    
    equation description4 | units [2,2,0]
    
    xx2 = hh + 10

    """)
#%%
r__("""v    some values
    
    this is one line 4 γ

    gg = 5.4    | height of roof 
    hh = 12.2   | height of balcony
    w1 = 2.2    | uniform load 

    """)
r__("""t    {03} Tables and Plots

    table1 = pd.read_table(testtable1.csv, sep=",")  | steel properties
    print(table1.iloc[0:5])

    table2 = pd.DataFrame()
    length1 = range(1:8)            | descrip
    area1 = range(10:18)            | descrip
    table2["length1"] = length1
    table2["area1"] = area1
    table2.to_csv(testtable2.csv, sep=",")
    print(table2)

    | filename.png | caption | l, lsy, sc, b 
    | table1 [_A[:], _B[:], _C[:]]  
    
    """)
r__("""r    a matplotlib plot
    
    fig, ax1 = plt.subplots()
    t = arange(0.01, 10.0, 0.01)
    s1 = exp(t)
    ax1.plot(t, s1, 'b-')
    ax1.set_xlabel('time (s)')
    
    ax1.set_ylabel('exp', color='b')
    ax1.tick_params('y', colors='b')

    ax2 = ax1.twinx()
    s2 = sin(2 * pi * t)
    ax2.plot(t, s2, 'r.')
    ax2.set_ylabel('sin', color='r')
    ax2.tick_params('y', colors='r')

    fig.tight_layout()
    plt.savefig(Path(rivfolder["fpath"] / "testfig7.png"))
    
    """)
